# playHB
你将和另外三个玩家进行一场抢红包大战，进行比赛的是你们的程序。
 	在游戏中，你可以在指定的地图空间内投放随机红包，同时也要负责移动自己位置去尽可能多地获取其它对手发放的红包。
 	此外，你可以根据当前的局势，花费一定的金额给对手设置障碍。
 	在指定轮次结束后，获取到最多金额的玩家为赢家。

1.	你需要写两个程序，两个程序分别完成以下操作：
1.1.	第一个程序“发红包”
用于发出红包指令，指令包括发出的多个红包在地图上投放的位置，以及红包的金额。
1.2.	第二个程序“抢红包”
用于发出控制指令，控制自己移动的方向，以及发出设置障碍指令，在指定的位置给其他玩家放置障碍。
1.3.	注意事项
1.3.1.  系统每1轮都会按玩家对应编号顺序调用所有玩家的抢红包程序，根据玩家发出的指令更新地图信息和玩家的累计金额信息。
1.3.2.  系统每隔100轮会按随机顺序调用所有玩家的发红包程序，根据玩家发出的红包指令更新地图和红包信息。

2.	规则说明
2.1.	地图信息：
游戏中的地图为40*40大小(坐标位置从0开始，位置范围为{0,0} – {39,39}，后续所有位置规则均以此为准)，地图中的每个元素（玩家、红包、障碍）占据1格。地图里已有初始障碍，且障碍永久存在。
2.2.	发红包规则：
系统每次调用发红包程序，你需要发出10个总金额为200元的红包，每个红包在地图上的位置以及对应的金额（金额为大于0的整数），由你来指定，但是不能出现在障碍、其他玩家或者是已有红包的位置上。发红包使用的是系统资金，不扣除玩家自身金额。
2.3.	抢红包规则：
每一轮抢红包，你可以发出控制指令，控制自己在地图中移动一格，方向由你指定，但是不能移动到障碍、其他玩家或者自己发放了红包的位置上。如果移动到有其他玩家发放了红包的格子上（即自己发的红包自己不能抢），你将获得该红包。
2.4.	障碍设置规则：
你可以在每一轮抢红包的同时，发出设置障碍指令，在全地图上的指定位置设置一个障碍（且障碍只能放在空白格子），障碍持续5轮后自动消失。1个障碍需要消耗你的金额5，只有当你的金额>=5时才可以进行设置。
2.5.	计分说明：
游戏开始时，每个玩家的初始金额都为0。
当你在抢红包时移动到有其他玩家发放了红包的格子上，你将获得该红包，该红包对应的金额即累计到你抢到红包的总金额中。
2.6.	判分说明：
在2000轮结束后，对玩家按累计金额从大到小进行排序，金额多的玩家胜出。
如果有玩家的累计金额相等，则达到当前金额所用的回合数更少者排名更靠前。


2.7.	输入输出要求：
所有数据通信，按照指定格式，通过标准输入读入，并通过标准输出进行输出。
2.7.1．“发红包”程序规则
系统每次调用发红包程序时给出当前玩家编号、当前轮次、当前所有的玩家金额、以及当前的地图信息到程序的标准输入。同时，从程序的标准输出读取指令序列。
2.7.1.1.	输入格式
输入采用文本格式，一共输入43行（以\n换行，最后一行以\n结尾）。
第1行信息：当前玩家编号Pn（大写P为固定前缀，n为玩家序列号：1-4，如P1表示第1个玩家）；
第2行信息：当前轮次Tn(大写T为固定前缀，n为当前轮次，如T0表示第0轮，T1999表示最后一轮)；
第3行信息：当前所有玩家金额 P1:score1;P2:score2;P3:score3;P4:score4，玩家数量固定为4个，玩家与玩家之间用英文字母分号(;)分割，玩家代号与金额间用英文字母冒号(:)分割；
从第4行开始接下来的40行为地图信息，每一行有40列。其中地图信息中：
Pn代表玩家（大写P为固定前缀，n为玩家序列号：1-4）
Bn代表障碍（大写B为固定前缀，n表示障碍剩余轮次：0-5，其中0表示为系统初始永久障碍，B1表示障碍还有1轮消失)
Rn_m表示红包（大写R为固定前缀，n表示发放该红包的玩家编号，m表示红包的金额，如R1_100表示玩家1发放的金额为100的红包），空白格子用#表示；两个格子之间用一个空格键“ ”隔开。

游戏开始时，系统给出一个初始地图，初始地图里面只有玩家和障碍信息，4个玩家位于地图4个角落，障碍的个数和位置均由系统随机分配。
输入信息示例(棋盘大小为40*40): 

地图信息重要事项说明：
1、	坐标说明，坐标中的{x,y}各自递增方向如下：
 
注意事项：以c语言为例，需要注意坐标的定义与二维数组的下标的含义并不同。
2.7.1.2.	输出格式
每次调用输出一行指令序列(以\n结尾)，一行中包含10个红包信息，每个红包的信息用Rn_x_y表示(R为固定前缀，n表示红包金额，{x，y}为红包所在坐标)，红包之间采用英文字母分号(;)隔离。

示例：
R20_0_2;R20_2_2;R20_3_3;R20_4_4;R20_5_5;R20_10_10;R20_13_13;R20_15_15;R20_15_20; R20_20_20

2.7.2.	“抢红包”程序规则
系统每一轮给出当前玩家编号、当前轮次、当前所有的玩家金额、以及当前的地图信息到程序的标准输入。同时，从程序的标准输出读取指令序列。
2.7.2.1.	输入格式
同2.7.1．“发红包”程序规则详细描述。
2.7.2.2.	输出格式
每轮输出一次指令序列，一个指令序列占一行(以\n结尾)，一行中可以同时包含移动指令和障碍指令，指令之间用;分隔。指令说明如下：
指令	说明	示例
L	向左移动一格（坐标位置x-1）	
R	向右移动一格（坐标位置x+1）	
U	向上移动一格（坐标位置y-1）	
D	向下移动一格（坐标位置y+1）	
S	停止不动	
B{X_Y}	在坐标(X，Y)放置临时障碍	B0_39
在坐标为{0,39}的位置放置一个临时障碍
	示例：
		L；B19_20  表示玩家向左移动一格，同时在坐标{19，20}放置一个临时障碍
		R 表示玩家像右移动一格

2.7.3.	其他判定规则
2.7.3.1.	超时判定和处罚
系统每次调用玩家程序，玩家需在2s内给出结果，如超时，则按如下两种情况进行判定：
A：超过10s没能给出输出结果的认为程序异常来判定；
B：大于2s且小于10s的情况，则每超时200ms扣除金额1；
2.7.3.2.	错误指令判定和处罚
发红包程序如给出了错误的指令(包括格式错误、个数和总金额不符合规则、发放到障碍、其他玩家或者是已有红包的位置上)，按程序异常判定；
抢红包程序如给出了错误的指令(包括格式错误、移动到障碍、其他玩家、自己发放的红包上面等情况)，则玩家金额扣除5，金额可以扣减到负数；
2.7.3.3.	程序异常判定与处罚
程序异常是指程序出现了中断，或者长时间未输出数据（超过10秒），或者数据输出格式有问题，以及其他的按异常判定的情形，异常判定玩家直接出局(玩家出局后占用的位置和设置的红包及障碍依然有效)。 
2.7.3.4.	资源限制：
单方面程序最大可用CPU为10个核，最大可用内存为20GB。超过则视为程序异常。 

2.9.	输入输出限制 
程序中会通过标准输入输出进行交互，其中无论程序中是否使用到标准输入的内容都必须对标准输入的内容进行读取，一旦没有读取将导致读缓冲区满而无法继续写入数据，将直接判为异常。
